---
layout: post
title: Diferencia entre flag [L] y [END] en ModRewrite de Apache
date: '2012-12-24T15:48:00.000+01:00'
author: Miguel González
tags:
- webmasters
- modrewrite
- apache
modified_time: '2012-12-24T15:48:09.253+01:00'
blogger_id: tag:blogger.com,1999:blog-8588071933588851396.post-1206994832023952111
blogger_orig_url: http://www.miguelg.com/2012/12/diferencia-entre-flag-l-y-end-en.html
---

En la versión 2.3 de Apache se introduce un nuevo flag para Mod Rewrite, el flag END, éste permite indicar cuando parar en el momento que una expresión es encontrada y encaja. Mucha gente podrá pensar que es lo mismo que el tag [L] pero no es asi.<br /><br />Cuando una bandera L es encontrada, singnifica que modRewrite dejará de mirar expresiones en esta iteración, pero volverá a hacer otra iteración desde el principio.<br /><br />Las unicas situaciones en las que Apache parará de parsear el archivo son:<br /><ol><li>No se encuentra ninguna expresión que coincida, no se sobreescribe nada</li><li>Una regla de salir es encontrada, por ejemplo: <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">RewriteRule (.*) - [L]</span></li><li>El script entre en un ciclo de reescritura, esto es que encuentra una coincidencia y vuelve a parsear el archivo y vuelve a encontrar otra coincidencia y asi sucesivamente. Cuando alcanza el límite (por defecto es 10, pero puede modificarse en la directiva <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">LimitInternalRecursion</span>) suele darse por tener expresiones que atrapan todo con el flag L</li></ol>Aquí es donde entra en juego la etiqueta END introducida en Apache 2.3, esta etiqueta indica el fin de parseo del archivo modRewrite y fin de iteración. De manear que una vez encontrada se puede indicar que es la buena y no necesitamos mirar de nuevo. <br /><br />Tomemos un ejemplo:<br /><br /><b>Usando el flag L</b><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">RewriteRule (.*) index.php?seccion=$1 [L]</span><br /><ol><li><span style="background-color: #eeeeee;">/portada</span> nos reescribe a <span style="background-color: #cfe2f3;">index.php?seccion=portada</span></li><li>En la siguiente iteración nos tomará como página <span style="background-color: #cfe2f3;">/index.php</span> y reescribe a <span style="background-color: #cfe2f3;">index.php?sec=index.php</span></li><li>En la siguiente iteración nos tomará lo mismo que anteriormente, <span style="background-color: #cfe2f3;">/index.php</span> y reescribe a <span style="background-color: #cfe2f3;">index.php?sec=index.php</span></li><li>Asi sucesivamente hasta alcanzar el límite de recursión.</li></ol><b>Usando el flag END</b><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">RewriteRule (.*) index.php?seccion=$1 [END]</span><br /><ol><li><span style="background-color: #cfe2f3;">/portada</span> nos reescribe a <span style="background-color: #cfe2f3;">index.php?seccion=portada</span></li><li>Al tener el flag END no hay segunda iteración</li></ol>Hay que tener cuidado al usar este tipo de de flags ya que pueden llevar a situaciones no deseadas, tanto L como END, en el que haya más de una expresión que coincida con la que necesitas pero al encontrar alguno de estos tags no sea capaz de comprobarla. <br /><br /><br />